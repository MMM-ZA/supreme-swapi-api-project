{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mac/code/MMM-ZA/supreme-swapi-api-project/supreme-swapi-api-project/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mac/code/MMM-ZA/supreme-swapi-api-project/supreme-swapi-api-project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/mac/code/MMM-ZA/supreme-swapi-api-project/supreme-swapi-api-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useState,useEffect,useCallback}from'react';import MoviesList from'./MoviesList';import classes from'./AddFavorites.module.css';import AddMovie from'./AddMovie';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddFavorites=function AddFavorites(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),movies=_useState2[0],setMovies=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var FetchMoviesHandler=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data,loadedMovies,key;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsLoading(true);setError(null);_context.prev=2;_context.next=5;return fetch('https://react-swapi-project-default-rtdb.firebaseio.com/movies.json');case 5:response=_context.sent;if(response.ok){_context.next=8;break;}throw new Error('Something went wrong!');case 8:_context.next=10;return response.json();case 10:data=_context.sent;loadedMovies=[];for(key in data){loadedMovies.push({id:key,title:data[key].title,openingText:data[key].openingText,releaseDate:data[key].releaseDate});}setMovies(loadedMovies);_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](2);// Handle error if the fetch or JSON parsing fails\nsetError(_context.t0.message);case 19:setIsLoading(false);case 20:case\"end\":return _context.stop();}},_callee,null,[[2,16]]);})),[]);useEffect(function(){FetchMoviesHandler();},[FetchMoviesHandler]);function addMovieHandler(_x){return _addMovieHandler.apply(this,arguments);}function _addMovieHandler(){_addMovieHandler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(movie){var response,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch('https://react-swapi-project-default-rtdb.firebaseio.com/movies.json',{method:'POST',body:JSON.stringify(movie),headers:{'Content-Type':'application/json'}});case 2:response=_context2.sent;_context2.next=5;return response.json();case 5:data=_context2.sent;console.log(data);case 7:case\"end\":return _context2.stop();}},_callee2);}));return _addMovieHandler.apply(this,arguments);}return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsx(AddMovie,{onAddMovie:addMovieHandler})}),/*#__PURE__*/_jsx(\"button\",{onClick:FetchMoviesHandler,children:\"Fetch Movies\"})]}),/*#__PURE__*/_jsxs(\"section\",{className:classes['list-section'],children:[!isLoading&&movies.length>0&&/*#__PURE__*/_jsx(MoviesList,{movies:movies}),!isLoading&&movies.length===0&&!error&&/*#__PURE__*/_jsx(\"p\",{children:\"Found no movies\"}),!isLoading&&error&&/*#__PURE__*/_jsx(\"p\",{children:error}),isLoading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})]})]});};export default AddFavorites;","map":{"version":3,"names":["React","useState","useEffect","useCallback","MoviesList","classes","AddMovie","jsx","_jsx","jsxs","_jsxs","AddFavorites","_useState","_useState2","_slicedToArray","movies","setMovies","_useState3","_useState4","isLoading","setIsLoading","_useState5","_useState6","error","setError","FetchMoviesHandler","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","loadedMovies","key","wrap","_callee$","_context","prev","next","fetch","sent","ok","Error","json","push","id","title","openingText","releaseDate","t0","message","stop","addMovieHandler","_x","_addMovieHandler","apply","arguments","_callee2","movie","_callee2$","_context2","method","body","JSON","stringify","headers","console","log","Fragment","children","onAddMovie","onClick","className","length"],"sources":["/Users/mac/code/MMM-ZA/supreme-swapi-api-project/supreme-swapi-api-project/src/components/AddFavorites.js"],"sourcesContent":["import React from 'react';\nimport { useState, useEffect, useCallback } from 'react';\nimport MoviesList from './MoviesList';\nimport classes from './AddFavorites.module.css';\nimport AddMovie from './AddMovie';\n\nconst AddFavorites = () => {\nconst [movies, setMovies] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n\n  const FetchMoviesHandler = useCallback(async() =>  {\n    setIsLoading(true);\n    setError(null)\n    try {\n      const response = await fetch('https://react-swapi-project-default-rtdb.firebaseio.com/movies.json');\n        if (!response.ok) {\n        throw new Error('Something went wrong!');\n      }\n\n      const data = await response.json();\n\n      const loadedMovies = [];\n\n      for (const key in data) {\n        loadedMovies.push({\n          id: key,\n          title: data[key].title,\n          openingText: data[key].openingText,\n          releaseDate: data[key].releaseDate,\n        });\n      }\n\n      setMovies(loadedMovies);\n\n\n    } catch (error) {\n      // Handle error if the fetch or JSON parsing fails\n      setError(error.message)\n    }\n    setIsLoading(false);\n  },[]);\n\n  useEffect(() => {\n  FetchMoviesHandler();\n },[FetchMoviesHandler])\n\n async function addMovieHandler(movie) {\n    const response = await fetch('https://react-swapi-project-default-rtdb.firebaseio.com/movies.json', {\n      method: 'POST',\n      body: JSON.stringify(movie),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n\n  const data = await response.json();\n  console.log(data);\n\n  }\n\n\n  return (\n    <React.Fragment>\n      <section>\n        <section>\n        <AddMovie onAddMovie={addMovieHandler} />\n      </section>\n        <button onClick={FetchMoviesHandler}>Fetch Movies</button>\n      </section>\n      <section className={classes['list-section']} >\n       {!isLoading && movies.length > 0 && <MoviesList movies={movies} />}\n       {!isLoading && movies.length === 0 && !error && <p>Found no movies</p>}\n       {!isLoading && error && <p>{error}</p>}\n       {isLoading && <p>Loading...</p> }\n      </section>\n    </React.Fragment>\n  );\n}\n\nexport default AddFavorites;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}