{"ast":null,"code":"var _jsxFileName = \"/Users/mac/code/MMM-ZA/supreme-swapi-api-project/supreme-swapi-api-project/src/components/AddFavorites.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport MoviesList from './MoviesList';\nimport classes from './AddFavorites.module.css';\nimport AddMovie from './AddMovie';\nimport { database } from '../Firebase/firebase';\nimport { ref, get, child, push, set } from 'firebase/database';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AddFavorites = () => {\n  _s();\n  const [movies, setMovies] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const FetchMoviesHandler = useCallback(async () => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      const dbRef = ref(database);\n      const snapshot = await get(child(dbRef, 'movies'));\n      if (!snapshot.exists()) {\n        throw new Error('No data available');\n      }\n      const data = snapshot.val();\n      const loadedMovies = [];\n      for (const key in data) {\n        loadedMovies.push({\n          id: key,\n          title: data[key].title,\n          openingText: data[key].openingText,\n          releaseDate: data[key].releaseDate\n        });\n      }\n      setMovies(loadedMovies);\n    } catch (error) {\n      setError(error.message);\n    }\n    setIsLoading(false);\n  }, []);\n  useEffect(() => {\n    FetchMoviesHandler();\n  }, [FetchMoviesHandler]);\n  const addMovieHandler = async movie => {\n    const newMovieRef = push(ref(database, 'movies'));\n    await set(newMovieRef, movie);\n    FetchMoviesHandler();\n  };\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"section\", {\n      children: [/*#__PURE__*/_jsxDEV(AddMovie, {\n        onAddMovie: addMovieHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: FetchMoviesHandler,\n        children: \"Fetch Movies\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: classes['list-section'],\n      children: [!isLoading && movies.length > 0 && /*#__PURE__*/_jsxDEV(MoviesList, {\n        movies: movies\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 45\n      }, this), !isLoading && movies.length === 0 && !error && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Found no movies\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 57\n      }, this), !isLoading && error && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 33\n      }, this), isLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 23\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n};\n_s(AddFavorites, \"IgWYEckjsDOwRe4l9JcMmGX8VfQ=\");\n_c = AddFavorites;\nexport default AddFavorites;\nvar _c;\n$RefreshReg$(_c, \"AddFavorites\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","MoviesList","classes","AddMovie","database","ref","get","child","push","set","jsxDEV","_jsxDEV","AddFavorites","_s","movies","setMovies","isLoading","setIsLoading","error","setError","FetchMoviesHandler","dbRef","snapshot","exists","Error","data","val","loadedMovies","key","id","title","openingText","releaseDate","message","addMovieHandler","movie","newMovieRef","Fragment","children","onAddMovie","fileName","_jsxFileName","lineNumber","columnNumber","onClick","className","length","_c","$RefreshReg$"],"sources":["/Users/mac/code/MMM-ZA/supreme-swapi-api-project/supreme-swapi-api-project/src/components/AddFavorites.js"],"sourcesContent":["\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport MoviesList from './MoviesList';\nimport classes from './AddFavorites.module.css';\nimport AddMovie from './AddMovie';\nimport { database } from '../Firebase/firebase';\nimport { ref, get, child, push, set } from 'firebase/database';\n\nconst AddFavorites = () => {\n  const [movies, setMovies] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const FetchMoviesHandler = useCallback(async () => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      const dbRef = ref(database);\n      const snapshot = await get(child(dbRef, 'movies'));\n      if (!snapshot.exists()) {\n        throw new Error('No data available');\n      }\n\n      const data = snapshot.val();\n      const loadedMovies = [];\n\n      for (const key in data) {\n        loadedMovies.push({\n          id: key,\n          title: data[key].title,\n          openingText: data[key].openingText,\n          releaseDate: data[key].releaseDate,\n        });\n      }\n\n      setMovies(loadedMovies);\n    } catch (error) {\n      setError(error.message);\n    }\n    setIsLoading(false);\n  }, []);\n\n  useEffect(() => {\n    FetchMoviesHandler();\n  }, [FetchMoviesHandler]);\n\n  const addMovieHandler = async (movie) => {\n    const newMovieRef = push(ref(database, 'movies'));\n    await set(newMovieRef, movie);\n    FetchMoviesHandler();\n  };\n\n  return (\n    <React.Fragment>\n      <section>\n        <AddMovie onAddMovie={addMovieHandler} />\n        <button onClick={FetchMoviesHandler}>Fetch Movies</button>\n      </section>\n      <section className={classes['list-section']}>\n        {!isLoading && movies.length > 0 && <MoviesList movies={movies} />}\n        {!isLoading && movies.length === 0 && !error && <p>Found no movies</p>}\n        {!isLoading && error && <p>{error}</p>}\n        {isLoading && <p>Loading...</p>}\n      </section>\n    </React.Fragment>\n  );\n};\n\nexport default AddFavorites;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}